---
title: "控制资源的访问权限之AWS IAM"
date: 2019-11-30T17:45:09+08:00
draft: false
tags: 
categories: 
- Tech
featured_image: 
description: 
--- 

# What
用来控制对AWS资源的访问权限，把资源(Resouuce)上的操作(Action)授权给谁(identity)

# How 

- 如何优雅的定义Resource
- 如何优雅的定义Action
- Identity
- Policy

## Resource 
AWS 给出的答案是： ARN（AWS Resource Namespace), ARN 是一个命名规则，用于无歧义的对AWS的资源进行命名。 

## Identity 
User, Group, Roles  
![](https://hyvi.github.io/blog-images/20191130/IAM-Identity.webp)  

## Action 
Action 也就是针对AWS上的服务提供的API。   
Condition Context Keys，是AWS IAM中支持的一个功能。即在定义Policy时可以使用一些变量，支持复杂的表达式。   

## Policy 
组成：

- “Version” 
- Statement： 具体策略的内容，可以是一个或者多个

  - Effect: Allow 或者 Deny
  - Action: 具体操作，参见[AWS Service Actions and Condition Context Keys for Use in IAM Policies.](http://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_actionsconditions.html)   
  - Resource: 具体的资源

三种： AWS Managed policy, Customer managed policy, inline policy   

一个identity所有的多个Policy会发生冲突，IAM采用的策略可以概括为8个字： ~凡事声明， 一票否决~  

- 凡事声明： 默认情况下， Resource是禁止访问的，只有显式声明了对资源的Allow权限，才允许访问。 
- 一票否决： 即便是有Policy开启了Allow, 一旦其他的Policy中出现对Resource的Deny声明，一律Deny   

# Implement 
怎么实现这个系统，以及各个系统怎么接入  


# 参考 
[ AWS IAM 从入门再到入门 ](https://www.jianshu.com/p/f59745ae7fad)  提到一些有用的工具    

<br>

<center>  ·End·  </center>
